/*! Isomer v0.2.4 | (c) 2014 Jordan Scales | jdan.github.io/isomer/license.txt */
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Isomer=t()}}(function(){return function t(n,e,r){function o(s,a){if(!e[s]){if(!n[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var p=e[s]={exports:{}};n[s][0].call(p.exports,function(t){var e=n[s][1][t];return o(e?e:t)},p,p.exports,t,n,e,r)}return e[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n){n.exports=t("./js/isomer")},{"./js/isomer":4}],2:[function(t,n){function e(t){this.elem=t,this.ctx=this.elem.getContext("2d"),this.width=t.width,this.height=t.height}e.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},e.prototype.path=function(t,n){this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y);for(var e=1;e<t.length;e++)this.ctx.lineTo(t[e].x,t[e].y);this.ctx.closePath(),this.ctx.save(),this.ctx.globalAlpha=n.a,this.ctx.fillStyle=this.ctx.strokeStyle=n.toHex(),this.ctx.stroke(),this.ctx.fill(),this.ctx.restore()},n.exports=e},{}],3:[function(t,n){function e(t,n,e,r){this.r=parseInt(t||0),this.g=parseInt(n||0),this.b=parseInt(e||0),this.a=parseFloat(Math.round(100*r)/100||1),this.loadHSL()}e.prototype.toHex=function(){var t=(256*this.r*256+256*this.g+this.b).toString(16);return t.length<6&&(t=new Array(6-t.length+1).join("0")+t),"#"+t},e.prototype.lighten=function(t,n){n=n||new e(255,255,255);var r=new e(n.r/255*this.r,n.g/255*this.g,n.b/255*this.b,this.a);return r.l=Math.min(r.l+t,1),r.loadRGB(),r},e.prototype.loadHSL=function(){var t,n,e=this.r/255,r=this.g/255,o=this.b/255,i=Math.max(e,r,o),s=Math.min(e,r,o),a=(i+s)/2;if(i===s)t=n=0;else{var h=i-s;switch(n=a>.5?h/(2-i-s):h/(i+s),i){case e:t=(r-o)/h+(o>r?6:0);break;case r:t=(o-e)/h+2;break;case o:t=(e-r)/h+4}t/=6}this.h=t,this.s=n,this.l=a},e.prototype.loadRGB=function(){var t,n,e,r=this.h,o=this.s,i=this.l;if(0===o)t=n=e=i;else{var s=.5>i?i*(1+o):i+o-i*o,a=2*i-s;t=this._hue2rgb(a,s,r+1/3),n=this._hue2rgb(a,s,r),e=this._hue2rgb(a,s,r-1/3)}this.r=parseInt(255*t),this.g=parseInt(255*n),this.b=parseInt(255*e)},e.prototype._hue2rgb=function(t,n,e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?t+6*(n-t)*e:.5>e?n:2/3>e?t+(n-t)*(2/3-e)*6:t},n.exports=e},{}],4:[function(t,n){function e(t,n){n=n||{},this.canvas=new o(t),this.angle=Math.PI/6,this.scale=n.scale||70,this._calculateTransformation(),this.originX=n.originX||this.canvas.width/2,this.originY=n.originY||.9*this.canvas.height,this.lightPosition=n.lightPosition||new p(2,-1,3),this.lightAngle=this.lightPosition.normalize(),this.colorDifference=.2,this.lightColor=n.lightColor||new i(255,255,255),this.paths=[]}function r(t,n){for(var e=!1,r=-1,o=t.length,i=o-1;++r<o;i=r)(t[r].y<=n.y&&n.y<t[i].y||t[i].y<=n.y&&n.y<t[r].y)&&n.x<(t[i].x-t[r].x)*(n.y-t[r].y)/(t[i].y-t[r].y)+t[r].x&&(e=!e);return e}var o=t("./canvas"),i=t("./color"),s=t("./path"),a=t("./point"),h=t("./shape"),p=t("./vector"),u=t("./obj");e.prototype.setLightPosition=function(t,n,e){this.lightPosition=new p(t,n,e),this.lightAngle=this.lightPosition.normalize()},e.prototype._translatePoint=function(t){var n=new a(t.x*this.transformation[0][0],t.x*this.transformation[0][1]),e=new a(t.y*this.transformation[1][0],t.y*this.transformation[1][1]),r=this.originX+n.x+e.x,o=this.originY-n.y-e.y-t.z*this.scale;return new a(r,o)},e.prototype.add=function(t,n,e,r){var o=!!e;if("[object Array]"==Object.prototype.toString.call(t))for(var i=0;i<t.length;i++)this.add(t[i],n,o,r);else if(t instanceof s)o?this.paths[this.paths.length]={path:t,color:n,shapeName:r||""}:this._addPath(t,n);else if(t instanceof h){var a=t.orderedPaths();for(var i in a)o?this.paths[this.paths.length]={path:a[i],color:n,shapeName:r||""}:this._addPath(a[i],n)}},e.prototype.draw=function(t){var n=!!t;n&&this.sortPaths();for(var e in this.paths)this._addPath(this.paths[e].path,this.paths[e].color)},e.prototype.sortPaths=function(){for(var t=e.Point,n=new t(-10,-10,20),r=[],o=0;o<this.paths.length;o++){var i=this.paths[o];r[o]={path:i.path,polygon:i.path.points.map(this._translatePoint.bind(this)),color:i.color,drawn:0,shapeName:i.shapeName}}this.paths.length=0;for(var s=[],o=0;o<r.length;o++)s[o]=[];for(var o=0;o<r.length;o++)for(var a=0;o>a;a++)if(this._hasIntersection(r[o].polygon,r[a].polygon)){var h=r[o].path.closerThan(r[a].path,n);0>h&&(s[o][s[o].length]=a),h>0&&(s[a][s[a].length]=o)}for(var p=1,u=0;1==p;){u++,p=0;for(var o=0;o<r.length;o++)if(0==r[o].drawn){for(var l=1,a=0;a<s[o].length;a++)0==r[s[o][a]].drawn&&(l=0);1==l&&(this.add(r[o].path,r[o].color,!0,r[o].shapeName),p=1,r[o].drawn=1)}}for(var o=0;o<r.length;o++)0==r[o].drawn&&this.add(r[o].path,r[o].color,!0,r[o].shapeName)},e.prototype._hasIntersection=function(t,n){var e,o,i=t[0].x,s=t[0].y,a=i,h=s,p=n[0].x,u=n[0].y,l=p,c=u;for(e=0;e<t.length;e++)i=Math.min(i,t[e].x),s=Math.min(s,t[e].y),a=Math.max(a,t[e].x),h=Math.max(h,t[e].y);for(e=0;e<n.length;e++)p=Math.min(p,n[e].x),u=Math.min(u,n[e].y),l=Math.max(l,n[e].x),c=Math.max(c,n[e].y);if((p>=i&&a>=p||i>=p&&l>=i)&&(u>=s&&h>=u||s>=u&&c>=s)){var f=t.slice(),y=n.slice();f.push(t[0]),y.push(n[0]);var g=[],x=[],v=[],m=[],d=[],w=[];for(e=0;e<=f.length-2;e++)g[e]=f[e+1].x-f[e].x,x[e]=f[e+1].y-f[e].y,d[e]=g[e]*f[e].y-x[e]*f[e].x;for(e=0;e<=y.length-2;e++)v[e]=y[e+1].x-y[e].x,m[e]=y[e+1].y-y[e].y,w[e]=v[e]*y[e].y-m[e]*y[e].x;for(e=0;e<=f.length-2;e++)for(o=0;o<=y.length-2;o++)if(g[e]*m[o]!=x[e]*v[o]&&(x[e]*y[o].x-g[e]*y[o].y+d[e])*(x[e]*y[o+1].x-g[e]*y[o+1].y+d[e])<-1e-9&&(m[o]*f[e].x-v[o]*f[e].y+w[o])*(m[o]*f[e+1].x-v[o]*f[e+1].y+w[o])<-1e-9)return!0;for(e=0;e<=f.length-2;e++)if(r(y,{x:f[e].x,y:f[e].y}))return!0;for(e=0;e<=y.length-2;e++)if(r(f,{x:y[e].x,y:y[e].y}))return!0;return!1}return!1},e.prototype._addPath=function(t,n){n=n||new i(120,120,120);var e=p.fromTwoPoints(t.points[1],t.points[0]),r=p.fromTwoPoints(t.points[2],t.points[1]),o=p.crossProduct(e,r).normalize(),s=p.dotProduct(o,this.lightAngle);color=n.lighten(s*this.colorDifference,this.lightColor),this.canvas.path(t.points.map(this._translatePoint.bind(this)),color)},e.prototype._calculateTransformation=function(){this.transformation=[[this.scale*Math.cos(this.angle),this.scale*Math.sin(this.angle)],[this.scale*Math.cos(Math.PI-this.angle),this.scale*Math.sin(Math.PI-this.angle)]]},e.Canvas=o,e.Color=i,e.Path=s,e.Point=a,e.Shape=h,e.Vector=p,e.Obj=u,n.exports=e},{"./canvas":2,"./color":3,"./obj":5,"./path":6,"./point":7,"./shape":8,"./vector":9}],5:[function(t,n){function e(t,n){this.fileUrl=t,this.callBack=n,this.importFile()}e.prototype.importFile=function(){var t=new XMLHttpRequest,n=this;t.open("GET",this.fileUrl,!0),t.responseType="text",t.onload=function(){return 4===t.readyState&&200===t.status?(n.file=t.response,n.fromObj()):void 0},t.send()},e.prototype.fromObj=function(){for(var t=this.file.split(/[ \t]*\r?\n[ \t]*/),n=[],e=[],r=[],o=0;o<t.length;o++){var i=t[o].trim().split(/\s+/);switch(i[0]){case"v":i.length>3&&r.push(new Point(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3])));break;case"vt":break;case"f":if(i.length>3){e=[];for(var s=1;s<i.length;s++){var a=i[s].split("/");e.push(r[a[0]-1])}n.push(new Path(e))}break;case"g":;break;case"o":break;case"mtllib":break;case"usemtl":}}console.log(r[12]),this.callBack(new Shape(n))},n.exports=e},{}],6:[function(t,n){function e(t){this.points="[object Array]"===Object.prototype.toString.call(t)?t:Array.prototype.slice.call(arguments)}var r=t("./point");e.prototype.push=function(t){this.points.push(t)},e.prototype.reverse=function(){var t=Array.prototype.slice.call(this.points);return new e(t.reverse())},e.prototype.translate=function(){var t=arguments;return new e(this.points.map(function(n){return n.translate.apply(n,t)}))},e.prototype.rotateZ=function(){var t=arguments;return new e(this.points.map(function(n){return n.rotateZ.apply(n,t)}))},e.prototype.scale=function(){var t=arguments;return new e(this.points.map(function(n){return n.scale.apply(n,t)}))},e.prototype.depth=function(){var t,n=0;for(t=0;t<this.points.length;t++)n+=this.points[t].depth();return n/(this.points.length||1)},e.prototype.closerThan=function(t,n){var e=t._countCloserThan(this,n)-this._countCloserThan(t,n);return e},e.prototype._countCloserThan=function(t,n){var e=Isomer.Vector,o=0,i=e.fromTwoPoints(t.points[0],t.points[1]),s=e.fromTwoPoints(t.points[0],t.points[2]),a=e.crossProduct(i,s),h=e.fromTwoPoints(r.ORIGIN,t.points[0]),p=e.fromTwoPoints(r.ORIGIN,n),u=e.dotProduct(a,h),l=e.dotProduct(a,p)-u,c=0,f=0;for(o=0;o<this.points.length;o++){var y=e.fromTwoPoints(r.ORIGIN,this.points[o]),g=e.dotProduct(a,y)-u;l*g>=1e-9&&c++,l*g>=-1e-9&&1e-9>l*g&&f++}return 0==c?0:(c+f)/this.points.length},e.Rectangle=function(t,n,o){void 0===n&&(n=1),void 0===o&&(o=1);var i=new e([t,new r(t.x+n,t.y,t.z),new r(t.x+n,t.y+o,t.z),new r(t.x,t.y+o,t.z)]);return i},e.Circle=function(t,n,o){o=o||20;var i,s=new e;for(i=0;o>i;i++)s.push(new r(n*Math.cos(2*i*Math.PI/o),n*Math.sin(2*i*Math.PI/o),0));return s.translate(t.x,t.y,t.z)},e.Star=function(t,n,o,i){var s,a,h=new e;for(s=0;2*i>s;s++)a=s%2===0?n:o,h.push(new r(a*Math.cos(s*Math.PI/i),a*Math.sin(s*Math.PI/i),0));return h.translate(t.x,t.y,t.z)},n.exports=e},{"./point":7}],7:[function(t,n){function e(t,n,r){return this instanceof e?(this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.z="number"==typeof r?r:0,void 0):new e(t,n,r)}e.ORIGIN=new e(0,0,0),e.prototype.translate=function(t,n,r){return new e(this.x+t,this.y+n,this.z+r)},e.prototype.scale=function(t,n,e,r){var o=this.translate(-t.x,-t.y,-t.z);return void 0===e&&void 0===r?e=r=n:r="number"==typeof r?r:1,o.x*=n,o.y*=e,o.z*=r,o.translate(t.x,t.y,t.z)},e.prototype.rotateZ=function(t,n){var e=this.translate(-t.x,-t.y,-t.z),r=e.x*Math.cos(n)-e.y*Math.sin(n),o=e.x*Math.sin(n)+e.y*Math.cos(n);return e.x=r,e.y=o,e.translate(t.x,t.y,t.z)},e.prototype.depth=function(){return this.x+this.y-2*this.z},e.distance=function(t,n){var e=n.x-t.x,r=n.y-t.y,o=n.z-t.z;return Math.sqrt(e*e+r*r+o*o)},n.exports=e},{}],8:[function(t,n){function e(t){this.paths="[object Array]"===Object.prototype.toString.call(t)?t:Array.prototype.slice.call(arguments)}var r=t("./path"),o=t("./point");e.prototype.push=function(t){this.paths.push(t)},e.prototype.translate=function(){var t=arguments;return new e(this.paths.map(function(n){return n.translate.apply(n,t)}))},e.prototype.rotateZ=function(){var t=arguments;return new e(this.paths.map(function(n){return n.rotateZ.apply(n,t)}))},e.prototype.scale=function(){var t=arguments;return new e(this.paths.map(function(n){return n.scale.apply(n,t)}))},e.prototype.orderedPaths=function(){var t=this.paths.slice();return t.sort(function(t,n){return n.depth()-t.depth()})},e.extrude=function(t,n){n="number"==typeof n?n:1;var o,i=t.translate(0,0,n),s=new e;for(s.push(t.reverse()),s.push(i),o=0;o<t.points.length;o++)s.push(new r([i.points[o],t.points[o],t.points[(o+1)%t.points.length],i.points[(o+1)%i.points.length]]));return s},e.Prism=function(t,n,i,s){n="number"==typeof n?n:1,i="number"==typeof i?i:1,s="number"==typeof s?s:1;var a=new e,h=new r([t,new o(t.x+n,t.y,t.z),new o(t.x+n,t.y,t.z+s),new o(t.x,t.y,t.z+s)]);a.push(h),a.push(h.reverse().translate(0,i,0));var p=new r([t,new o(t.x,t.y,t.z+s),new o(t.x,t.y+i,t.z+s),new o(t.x,t.y+i,t.z)]);a.push(p),a.push(p.reverse().translate(n,0,0));var u=new r([t,new o(t.x+n,t.y,t.z),new o(t.x+n,t.y+i,t.z),new o(t.x,t.y+i,t.z)]);return a.push(u.reverse()),a.push(u.translate(0,0,s)),a},e.Pyramid=function(t,n,i,s){n="number"==typeof n?n:1,i="number"==typeof i?i:1,s="number"==typeof s?s:1;var a=new e,h=new r([t,new o(t.x+n,t.y,t.z),new o(t.x+n/2,t.y+i/2,t.z+s)]);a.push(h),a.push(h.rotateZ(t.translate(n/2,i/2),Math.PI));var p=new r([t,new o(t.x+n/2,t.y+i/2,t.z+s),new o(t.x,t.y+i,t.z)]);return a.push(p),a.push(p.rotateZ(t.translate(n/2,i/2),Math.PI)),a},e.Cylinder=function(t,n,o,i){n="number"==typeof n?n:1;var s=r.Circle(t,n,o),a=e.extrude(s,i);return a},n.exports=e},{"./path":6,"./point":7}],9:[function(t,n){function e(t,n,e){this.i="number"==typeof t?t:0,this.j="number"==typeof n?n:0,this.k="number"==typeof e?e:0}e.fromTwoPoints=function(t,n){return new e(n.x-t.x,n.y-t.y,n.z-t.z)},e.crossProduct=function(t,n){var r=t.j*n.k-n.j*t.k,o=-1*(t.i*n.k-n.i*t.k),i=t.i*n.j-n.i*t.j;return new e(r,o,i)},e.dotProduct=function(t,n){return t.i*n.i+t.j*n.j+t.k*n.k},e.prototype.magnitude=function(){return Math.sqrt(this.i*this.i+this.j*this.j+this.k*this.k)},e.prototype.normalize=function(){var t=this.magnitude();return new e(this.i/t,this.j/t,this.k/t)},n.exports=e},{}]},{},[1])(1)});