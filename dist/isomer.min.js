/*! Isomer v0.2.4 | (c) 2014 Jordan Scales | jdan.github.io/isomer/license.txt */
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Isomer=t()}}(function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return i(n?n:t)},p,p.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e){e.exports=t("./js/isomer")},{"./js/isomer":4}],2:[function(t,e){function n(t){this.elem=t,this.ctx=this.elem.getContext("2d"),this.width=t.width,this.height=t.height}n.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},n.prototype.path=function(t,e){this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;n++)this.ctx.lineTo(t[n].x,t[n].y);this.ctx.closePath(),this.ctx.save(),this.ctx.globalAlpha=e.a,this.ctx.fillStyle=this.ctx.strokeStyle=e.toHex(),this.ctx.stroke(),this.ctx.fill(),this.ctx.restore()},e.exports=n},{}],3:[function(t,e){function n(t,e,n,r){this.r=parseInt(t||0),this.g=parseInt(e||0),this.b=parseInt(n||0),this.a=parseFloat(Math.round(100*r)/100||1),this.loadHSL()}n.prototype.toHex=function(){var t=(256*this.r*256+256*this.g+this.b).toString(16);return t.length<6&&(t=new Array(6-t.length+1).join("0")+t),"#"+t},n.prototype.lighten=function(t,e){e=e||new n(255,255,255);var r=new n(e.r/255*this.r,e.g/255*this.g,e.b/255*this.b,this.a);return r.l=Math.min(r.l+t,1),r.loadRGB(),r},n.prototype.loadHSL=function(){var t,e,n=this.r/255,r=this.g/255,i=this.b/255,o=Math.max(n,r,i),s=Math.min(n,r,i),a=(o+s)/2;if(o===s)t=e=0;else{var h=o-s;switch(e=a>.5?h/(2-o-s):h/(o+s),o){case n:t=(r-i)/h+(i>r?6:0);break;case r:t=(i-n)/h+2;break;case i:t=(n-r)/h+4}t/=6}this.h=t,this.s=e,this.l=a},n.prototype.loadRGB=function(){var t,e,n,r=this.h,i=this.s,o=this.l;if(0===i)t=e=n=o;else{var s=.5>o?o*(1+i):o+i-o*i,a=2*o-s;t=this._hue2rgb(a,s,r+1/3),e=this._hue2rgb(a,s,r),n=this._hue2rgb(a,s,r-1/3)}this.r=parseInt(255*t),this.g=parseInt(255*e),this.b=parseInt(255*n)},n.prototype._hue2rgb=function(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t},e.exports=n},{}],4:[function(t,e){function n(t,e){e=e||{},this.canvas=new r(t),this.angle=Math.PI/6,this.scale=e.scale||70,this._calculateTransformation(),this.originX=e.originX||this.canvas.width/2,this.originY=e.originY||.9*this.canvas.height,this.lightPosition=e.lightPosition||new h(2,-1,3),this.lightAngle=this.lightPosition.normalize(),this.colorDifference=.2,this.lightColor=e.lightColor||new i(255,255,255)}var r=t("./canvas"),i=t("./color"),o=t("./path"),s=t("./point"),a=t("./shape"),h=t("./vector"),p=t("./obj");n.prototype.setLightPosition=function(t,e,n){this.lightPosition=new h(t,e,n),this.lightAngle=this.lightPosition.normalize()},n.prototype._translatePoint=function(t){var e=new s(t.x*this.transformation[0][0],t.x*this.transformation[0][1]),n=new s(t.y*this.transformation[1][0],t.y*this.transformation[1][1]),r=this.originX+e.x+n.x,i=this.originY-e.y-n.y-t.z*this.scale;return new s(r,i)},n.prototype.add=function(t,e){if("[object Array]"==Object.prototype.toString.call(t))for(var n=0;n<t.length;n++)this.add(t[n],e);else if(t instanceof o)this._addPath(t,e);else if(t instanceof a){var r=t.orderedPaths();for(var n in r)this._addPath(r[n],e)}},n.prototype._addPath=function(t,e){e=e||new i(120,120,120);var n=h.fromTwoPoints(t.points[1],t.points[0]),r=h.fromTwoPoints(t.points[2],t.points[1]),o=h.crossProduct(n,r).normalize(),s=h.dotProduct(o,this.lightAngle);color=e.lighten(s*this.colorDifference,this.lightColor),this.canvas.path(t.points.map(this._translatePoint.bind(this)),color)},n.prototype._calculateTransformation=function(){this.transformation=[[this.scale*Math.cos(this.angle),this.scale*Math.sin(this.angle)],[this.scale*Math.cos(Math.PI-this.angle),this.scale*Math.sin(Math.PI-this.angle)]]},n.Canvas=r,n.Color=i,n.Path=o,n.Point=s,n.Shape=a,n.Vector=h,n.Obj=p,e.exports=n},{"./canvas":2,"./color":3,"./obj":5,"./path":6,"./point":7,"./shape":8,"./vector":9}],5:[function(t,e){function n(t,e){this.fileUrl=t,this.callBack=e,this.importFile()}n.prototype.importFile=function(){var t=new XMLHttpRequest,e=this;t.open("GET",this.fileUrl,!0),t.responseType="text",t.onload=function(){return 4===t.readyState&&200===t.status?(e.file=t.response,e.parseObj()):void 0},t.send()},n.prototype.parseObj=function(){for(var t=Isomer.Path,e=Isomer.Point,n=[],r=[],i=[],o=(new t,this.file.split("\n")),e=Isomer.Point,s=0;s<o.length;s++){var a=o[s].trim().split(/\s+/);switch(a[0]){case"v":n.push(new e(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])));break;case"f":var h=[];a.splice(0,1);for(var p=0;p<a.length;p++)h.push(n[a[p]-1]);i.push(new t(h));break;case"g":a[1]&&r.push(i),i=new Shape}}r.push(i),this.generatedObject=r,this.callBack(this.generatedObject)},e.exports=n},{}],6:[function(t,e){function n(t){this.points="[object Array]"===Object.prototype.toString.call(t)?t:Array.prototype.slice.call(arguments)}var r=t("./point");n.prototype.push=function(t){this.points.push(t)},n.prototype.reverse=function(){var t=Array.prototype.slice.call(this.points);return new n(t.reverse())},n.prototype.translate=function(){var t=arguments;return new n(this.points.map(function(e){return e.translate.apply(e,t)}))},n.prototype.rotateZ=function(){var t=arguments;return new n(this.points.map(function(e){return e.rotateZ.apply(e,t)}))},n.prototype.scale=function(){var t=arguments;return new n(this.points.map(function(e){return e.scale.apply(e,t)}))},n.prototype.depth=function(){var t,e=0;for(t=0;t<this.points.length;t++)e+=this.points[t].depth();return e/(this.points.length||1)},n.Rectangle=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1);var o=new n([t,new r(t.x+e,t.y,t.z),new r(t.x+e,t.y+i,t.z),new r(t.x,t.y+i,t.z)]);return o},n.Circle=function(t,e,i){i=i||20;var o,s=new n;for(o=0;i>o;o++)s.push(new r(e*Math.cos(2*o*Math.PI/i),e*Math.sin(2*o*Math.PI/i),0));return s.translate(t.x,t.y,t.z)},n.Star=function(t,e,i,o){var s,a,h=new n;for(s=0;2*o>s;s++)a=s%2===0?e:i,h.push(new r(a*Math.cos(s*Math.PI/o),a*Math.sin(s*Math.PI/o),0));return h.translate(t.x,t.y,t.z)},e.exports=n},{"./point":7}],7:[function(t,e){function n(t,e,r){return this instanceof n?(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof r?r:0,void 0):new n(t,e,r)}n.ORIGIN=new n(0,0,0),n.prototype.translate=function(t,e,r){return new n(this.x+t,this.y+e,this.z+r)},n.prototype.scale=function(t,e,n,r){var i=this.translate(-t.x,-t.y,-t.z);return void 0===n&&void 0===r?n=r=e:r="number"==typeof r?r:1,i.x*=e,i.y*=n,i.z*=r,i.translate(t.x,t.y,t.z)},n.prototype.rotateZ=function(t,e){var n=this.translate(-t.x,-t.y,-t.z),r=n.x*Math.cos(e)-n.y*Math.sin(e),i=n.x*Math.sin(e)+n.y*Math.cos(e);return n.x=r,n.y=i,n.translate(t.x,t.y,t.z)},n.prototype.depth=function(){return this.x+this.y-2*this.z},n.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return Math.sqrt(n*n+r*r+i*i)},e.exports=n},{}],8:[function(t,e){function n(t){this.paths="[object Array]"===Object.prototype.toString.call(t)?t:Array.prototype.slice.call(arguments)}var r=t("./path"),i=t("./point");n.prototype.push=function(t){this.paths.push(t)},n.prototype.translate=function(){var t=arguments;return new n(this.paths.map(function(e){return e.translate.apply(e,t)}))},n.prototype.rotateZ=function(){var t=arguments;return new n(this.paths.map(function(e){return e.rotateZ.apply(e,t)}))},n.prototype.scale=function(){var t=arguments;return new n(this.paths.map(function(e){return e.scale.apply(e,t)}))},n.prototype.orderedPaths=function(){var t=this.paths.slice();return t.sort(function(t,e){return e.depth()-t.depth()})},n.extrude=function(t,e){e="number"==typeof e?e:1;var i,o=t.translate(0,0,e),s=new n;for(s.push(t.reverse()),s.push(o),i=0;i<t.points.length;i++)s.push(new r([o.points[i],t.points[i],t.points[(i+1)%t.points.length],o.points[(i+1)%o.points.length]]));return s},n.Prism=function(t,e,o,s){e="number"==typeof e?e:1,o="number"==typeof o?o:1,s="number"==typeof s?s:1;var a=new n,h=new r([t,new i(t.x+e,t.y,t.z),new i(t.x+e,t.y,t.z+s),new i(t.x,t.y,t.z+s)]);a.push(h),a.push(h.reverse().translate(0,o,0));var p=new r([t,new i(t.x,t.y,t.z+s),new i(t.x,t.y+o,t.z+s),new i(t.x,t.y+o,t.z)]);a.push(p),a.push(p.reverse().translate(e,0,0));var u=new r([t,new i(t.x+e,t.y,t.z),new i(t.x+e,t.y+o,t.z),new i(t.x,t.y+o,t.z)]);return a.push(u.reverse()),a.push(u.translate(0,0,s)),a},n.Pyramid=function(t,e,o,s){e="number"==typeof e?e:1,o="number"==typeof o?o:1,s="number"==typeof s?s:1;var a=new n,h=new r([t,new i(t.x+e,t.y,t.z),new i(t.x+e/2,t.y+o/2,t.z+s)]);a.push(h),a.push(h.rotateZ(t.translate(e/2,o/2),Math.PI));var p=new r([t,new i(t.x+e/2,t.y+o/2,t.z+s),new i(t.x,t.y+o,t.z)]);return a.push(p),a.push(p.rotateZ(t.translate(e/2,o/2),Math.PI)),a},n.Cylinder=function(t,e,i,o){e="number"==typeof e?e:1;var s=r.Circle(t,e,i),a=n.extrude(s,o);return a},e.exports=n},{"./path":6,"./point":7}],9:[function(t,e){function n(t,e,n){this.i="number"==typeof t?t:0,this.j="number"==typeof e?e:0,this.k="number"==typeof n?n:0}n.fromTwoPoints=function(t,e){return new n(e.x-t.x,e.y-t.y,e.z-t.z)},n.crossProduct=function(t,e){var r=t.j*e.k-e.j*t.k,i=-1*(t.i*e.k-e.i*t.k),o=t.i*e.j-e.i*t.j;return new n(r,i,o)},n.dotProduct=function(t,e){return t.i*e.i+t.j*e.j+t.k*e.k},n.prototype.magnitude=function(){return Math.sqrt(this.i*this.i+this.j*this.j+this.k*this.k)},n.prototype.normalize=function(){var t=this.magnitude();return new n(this.i/t,this.j/t,this.k/t)},e.exports=n},{}]},{},[1])(1)});